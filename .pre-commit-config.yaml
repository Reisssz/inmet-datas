# See https://pre-commit.com for more information
# See https://pre-commit.com/hooks.html for more hooks
exclude: .md$
repos:
- repo: local
  hooks:
  - id: check-merge-conflict
    name: checking merge conflicts
    description: checks for files that contain merge conflict strings.
    entry: check-merge-conflict
    language: python
    types: [text]

  - id: check-added-large-files
    name: checking for added large files
    description: prevents giant files from being committed.
    entry: check-added-large-files
    language: python

  - id: end-of-file-fixer
    name: fix end of files
    description: ensures that a file is either empty, or ends with one newline.
    entry: end-of-file-fixer
    language: python
    exclude: dvc.lock|.*\.json$
    types: [text]
    stages: [commit, push, manual]

  - id: trailing-whitespace
    name: trim trailing whitespaces
    description: trims trailing whitespace.
    entry: trailing-whitespace-fixer
    language: python
    types: [text]
    exclude: dvc.lock
    stages: [commit, push, manual]

  - id: jupyter-nb-clear-output
    name: jupyter-nb-clear-output
    files: \.ipynb$
    stages: [commit]
    language: system
    entry: jupyter nbconvert --ClearOutputPreprocessor.enabled=True --inplace

  - id: check-yaml
    name: checking yaml
    description: checks yaml files for parseable syntax.
    entry: check-yaml
    language: python
    types: [yaml]
    stages: [commit]

  - id: check-ast
    name: checking python AST
    description: simply checks whether the files parse as valid python.
    entry: check-ast
    language: python
    types: [python]

  - id: check-docstring-first
    name: checking docstring
    description: checks a common error of defining a docstring after code.
    entry: check-docstring-first
    language: python
    types: [python]

  - id: black
    name: formatting using black
    description: 'Black: The uncompromising Python code formatter'
    entry: black
    require_serial: true
    language: python
    types_or: [python, pyi]
    args: [--line-length, '79']

  - id: docformatter
    name: doc formatter
    description: formats docstrings to follow PEP 257.
    entry: docformatter
    language: python
    types: [text]
    args: [--in-place, --wrap-summaries=79, --wrap-descriptions=79, --pre-summary-newline,
      --blank, --make-summary-multi-line]
    stages: [commit]

  - id: pylint
    name: pylint
    entry: pylint
    language: python
    require_serial: true
    types_or: [python, pyi]
    args: ['--disable=C0114, E0401', --fail-under=9]
    stages: [commit]

  - id: pip-compile
    name: compiling requirements-dev.in
    entry: pip-compile --no-emit-index-url requirements-dev.in --output-file requirements-dev.txt
    language: system
    files: requirements-dev.in

  - id: pip-compile
    name: compiling requirements.in
    entry: pip-compile --no-emit-index-url requirements.in --output-file requirements.txt
    language: system
    files: requirements.in

  - id: pip-compile
    name: compiling requirements-app.in
    entry: pip-compile --no-emit-index-url requirements-app.in --output-file requirements-app.txt
    language: system
    files: requirements.in

- repo: https://github.com/iterative/dvc
  rev: 3.45.0
  hooks:
  - id: dvc-pre-commit
    additional_dependencies:
    - .[all]
    language_version: python3
    stages:
    - commit
  - id: dvc-pre-push
    additional_dependencies:
    - .[all]
    language_version: python3
    stages:
    - push
  - id: dvc-post-checkout
    additional_dependencies:
    - .[all]
    language_version: python3
    stages:
    - post-checkout
    always_run: true
 
